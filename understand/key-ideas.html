
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Key concepts Â· MassTransit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../build/gitbook.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="under-the-hood.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Overview</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../quickstart.html">
            
                <a href="../quickstart.html">
            
                    
                    Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../introduction/getting-help.html">
            
                <a href="../introduction/getting-help.html">
            
                    
                    Getting Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Understanding MassTransit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.1" data-path="key-ideas.html">
            
                <a href="key-ideas.html">
            
                    
                    Key concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="under-the-hood.html">
            
                <a href="under-the-hood.html">
            
                    
                    Under the hood
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="default-topology.html">
            
                <a href="default-topology.html">
            
                    
                    Topology
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="additions-to-transport.html">
            
                <a href="additions-to-transport.html">
            
                    
                    What we add to the transport
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="publishing.html">
            
                <a href="publishing.html">
            
                    
                    Publishing messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="sending.md">
            
                <span>
            
                    
                    Sending messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="perfcounters.html">
            
                <a href="perfcounters.html">
            
                    
                    Performance counters
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../learn/">
            
                <a href="../learn/">
            
                    
                    Learning Resources
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../learn/samples/">
            
                <a href="../learn/samples/">
            
                    
                    Samples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../learn/samples/request-response.html">
            
                <a href="../learn/samples/request-response.html">
            
                    
                    Request/Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../learn/samples/saga.html">
            
                <a href="../learn/samples/saga.html">
            
                    
                    Saga
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="../learn/samples/courier.html">
            
                <a href="../learn/samples/courier.html">
            
                    
                    Courier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.4" data-path="../learn/samples/containers.html">
            
                <a href="../learn/samples/containers.html">
            
                    
                    Containers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.5" data-path="../learn/samples/quartz.html">
            
                <a href="../learn/samples/quartz.html">
            
                    
                    Quartz
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../learn/videos.html">
            
                <a href="../learn/videos.html">
            
                    
                    Videos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../learn/courses.html">
            
                <a href="../learn/courses.html">
            
                    
                    Courses
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../learn/loving-the-community.html">
            
                <a href="../learn/loving-the-community.html">
            
                    
                    Loving the community
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../contributing/">
            
                <a href="../contributing/">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Usage</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../introduction/">
            
                <a href="../introduction/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../introduction/prerequisites.html">
            
                <a href="../introduction/prerequisites.html">
            
                    
                    Prerequisites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../introduction/packages.html">
            
                <a href="../introduction/packages.html">
            
                    
                    Supported Packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../introduction/how-to-install.html">
            
                <a href="../introduction/how-to-install.html">
            
                    
                    How to install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../introduction/getting-help.html">
            
                <a href="../introduction/getting-help.html">
            
                    
                    Getting help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../introduction/how-to-report-bugs.html">
            
                <a href="../introduction/how-to-report-bugs.html">
            
                    
                    How to report bugs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../usage/">
            
                <a href="../usage/">
            
                    
                    Using MassTransit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../usage/configuration.html">
            
                <a href="../usage/configuration.html">
            
                    
                    Configure MassTransit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../usage/transports.html">
            
                <a href="../usage/transports.html">
            
                    
                    Choose a transport
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.2.1" data-path="../usage/azure-functions.html">
            
                <a href="../usage/azure-functions.html">
            
                    
                    Azure Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../usage/message-contracts.html">
            
                <a href="../usage/message-contracts.html">
            
                    
                    Create message contracts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../usage/message-consumers.html">
            
                <a href="../usage/message-consumers.html">
            
                    
                    Create message consumers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../usage/producing-messages.html">
            
                <a href="../usage/producing-messages.html">
            
                    
                    Produce messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.6" data-path="../usage/message-initializers.html">
            
                <a href="../usage/message-initializers.html">
            
                    
                    Initialize messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7" data-path="../usage/correlation.html">
            
                <a href="../usage/correlation.html">
            
                    
                    Correlate messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8" data-path="../usage/containers/">
            
                <a href="../usage/containers/">
            
                    
                    Use IoC container
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.8.1" data-path="../usage/containers/autofac.html">
            
                <a href="../usage/containers/autofac.html">
            
                    
                    Autofac
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8.2" data-path="../usage/containers/ninject.html">
            
                <a href="../usage/containers/ninject.html">
            
                    
                    Ninject
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8.3" data-path="../usage/containers/structuremap.html">
            
                <a href="../usage/containers/structuremap.html">
            
                    
                    StructureMap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8.4" data-path="../usage/containers/lamar.html">
            
                <a href="../usage/containers/lamar.html">
            
                    
                    Lamar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8.5" data-path="../usage/containers/unity.html">
            
                <a href="../usage/containers/unity.html">
            
                    
                    Unity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8.6" data-path="../usage/containers/castlewindsor.html">
            
                <a href="../usage/containers/castlewindsor.html">
            
                    
                    Castle Windsor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8.7" data-path="../usage/containers/msdi.html">
            
                <a href="../usage/containers/msdi.html">
            
                    
                    Microsoft Dependency Injection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.9" data-path="../usage/request-response.html">
            
                <a href="../usage/request-response.html">
            
                    
                    Request/Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.10" data-path="../usage/exceptions.html">
            
                <a href="../usage/exceptions.html">
            
                    
                    Handle exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11" data-path="../usage/retries.html">
            
                <a href="../usage/retries.html">
            
                    
                    Configure retries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.12" data-path="../usage/message-data.html">
            
                <a href="../usage/message-data.html">
            
                    
                    Large payloads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13" data-path="../usage/scheduling/">
            
                <a href="../usage/scheduling/">
            
                    
                    Schedule messages
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.13.1" data-path="../usage/scheduling/scheduling-api.html">
            
                <a href="../usage/scheduling/scheduling-api.html">
            
                    
                    Scheduling API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13.2" data-path="../usage/scheduling/in-memory.html">
            
                <a href="../usage/scheduling/in-memory.html">
            
                    
                    In-memory scheduling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13.3" data-path="../usage/scheduling/activemq-delayed.html">
            
                <a href="../usage/scheduling/activemq-delayed.html">
            
                    
                    ActiveMQ Delay and Schedule Message Delivery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13.4" data-path="../usage/scheduling/azure-sb-scheduler.html">
            
                <a href="../usage/scheduling/azure-sb-scheduler.html">
            
                    
                    Azure Service Bus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13.5" data-path="../usage/scheduling/rabbitmq-delayed.html">
            
                <a href="../usage/scheduling/rabbitmq-delayed.html">
            
                    
                    RabbitMQ Delayed Exchange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13.6" data-path="../usage/scheduling/redeliver.html">
            
                <a href="../usage/scheduling/redeliver.html">
            
                    
                    Redelivering messages
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.14" data-path="../usage/observers.html">
            
                <a href="../usage/observers.html">
            
                    
                    Observe messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.15" data-path="../usage/lifecycle-observers.html">
            
                <a href="../usage/lifecycle-observers.html">
            
                    
                    Observe lifecycle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.16" >
            
                <span>
            
                    
                    Monitoring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.16.1" data-path="../usage/monitoring/applications-insights.html">
            
                <a href="../usage/monitoring/applications-insights.html">
            
                    
                    AppInsights
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.16.2" data-path="../usage/monitoring/diagnostic-source.html">
            
                <a href="../usage/monitoring/diagnostic-source.html">
            
                    
                    Diagnostic Source
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.17" data-path="../usage/connect-endpoint.html">
            
                <a href="../usage/connect-endpoint.html">
            
                    
                    Connect endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.18" data-path="../usage/logging.html">
            
                <a href="../usage/logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.19" data-path="../usage/testing/">
            
                <a href="../usage/testing/">
            
                    
                    Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.19.1" data-path="../usage/testing/bus-harness.html">
            
                <a href="../usage/testing/bus-harness.html">
            
                    
                    Bus harness
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.19.2" data-path="../usage/testing/testing-consumers.html">
            
                <a href="../usage/testing/testing-consumers.html">
            
                    
                    Testing consumers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.19.3" data-path="../usage/testing/testing-sagas.html">
            
                <a href="../usage/testing/testing-sagas.html">
            
                    
                    Testing sagas
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Advanced</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../advanced/sagas/">
            
                <a href="../advanced/sagas/">
            
                    
                    Sagas
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../advanced/sagas/automatonymous.html">
            
                <a href="../advanced/sagas/automatonymous.html">
            
                    
                    Automatonymous
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../advanced/sagas/persistence.html">
            
                <a href="../advanced/sagas/persistence.html">
            
                    
                    Persistence
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../advanced/courier/">
            
                <a href="../advanced/courier/">
            
                    
                    Courier
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../advanced/courier/activities.html">
            
                <a href="../advanced/courier/activities.html">
            
                    
                    Activities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../advanced/courier/builder.html">
            
                <a href="../advanced/courier/builder.html">
            
                    
                    Builder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../advanced/courier/execute.html">
            
                <a href="../advanced/courier/execute.html">
            
                    
                    Execution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../advanced/courier/events.html">
            
                <a href="../advanced/courier/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../advanced/courier/subscriptions.html">
            
                <a href="../advanced/courier/subscriptions.html">
            
                    
                    Subscriptions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../advanced/middleware/">
            
                <a href="../advanced/middleware/">
            
                    
                    Middleware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../advanced/middleware/receive.html">
            
                <a href="../advanced/middleware/receive.html">
            
                    
                    Receive Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../advanced/middleware/concurrency-limit.html">
            
                <a href="../advanced/middleware/concurrency-limit.html">
            
                    
                    Concurrent Message Limit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../advanced/middleware/circuit-breaker.html">
            
                <a href="../advanced/middleware/circuit-breaker.html">
            
                    
                    Circuit breaker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../advanced/middleware/rate-limiter.html">
            
                <a href="../advanced/middleware/rate-limiter.html">
            
                    
                    Rate limiter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../advanced/middleware/latest.html">
            
                <a href="../advanced/middleware/latest.html">
            
                    
                    Latest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.6" data-path="../advanced/middleware/custom.html">
            
                <a href="../advanced/middleware/custom.html">
            
                    
                    Custom
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../advanced/audit/">
            
                <a href="../advanced/audit/">
            
                    
                    Audit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../advanced/turnout/">
            
                <a href="../advanced/turnout/">
            
                    
                    Turnout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../advanced/versioning.html">
            
                <a href="../advanced/versioning.html">
            
                    
                    Versioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../advanced/topology/">
            
                <a href="../advanced/topology/">
            
                    
                    Topology
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../advanced/topology/message.html">
            
                <a href="../advanced/topology/message.html">
            
                    
                    Message
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../advanced/topology/publish.html">
            
                <a href="../advanced/topology/publish.html">
            
                    
                    Publish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.3" data-path="../advanced/topology/send.html">
            
                <a href="../advanced/topology/send.html">
            
                    
                    Send
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.4" data-path="../advanced/topology/consume.html">
            
                <a href="../advanced/topology/consume.html">
            
                    
                    Consume
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.5" data-path="../advanced/topology/conventions.html">
            
                <a href="../advanced/topology/conventions.html">
            
                    
                    Conventions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.6" data-path="../advanced/topology/rabbitmq/">
            
                <a href="../advanced/topology/rabbitmq/">
            
                    
                    RabbitMQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.6.1" data-path="../advanced/topology/rabbitmq/binding.html">
            
                <a href="../advanced/topology/rabbitmq/binding.html">
            
                    
                    Exchange Binding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.6.2" data-path="../advanced/topology/rabbitmq/routingkey.html">
            
                <a href="../advanced/topology/rabbitmq/routingkey.html">
            
                    
                    RoutingKey
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7.7" data-path="../advanced/topology/servicebus/">
            
                <a href="../advanced/topology/servicebus/">
            
                    
                    Azure Service Bus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.7.1" data-path="../advanced/topology/servicebus/sessionid.html">
            
                <a href="../advanced/topology/servicebus/sessionid.html">
            
                    
                    SessionId
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.7.2" data-path="../advanced/topology/servicebus/partitionkey.html">
            
                <a href="../advanced/topology/servicebus/partitionkey.html">
            
                    
                    PartitionKey
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.7.3" data-path="../advanced/topology/servicebus/topicsub.html">
            
                <a href="../advanced/topology/servicebus/topicsub.html">
            
                    
                    Topic Subscription
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../advanced/transactions.html">
            
                <a href="../advanced/transactions.html">
            
                    
                    Transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../advanced/interoperability.html">
            
                <a href="../advanced/interoperability.html">
            
                    
                    Interoperability
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.9.1" data-path="../advanced/interoperability/encrypted-messages.html">
            
                <a href="../advanced/interoperability/encrypted-messages.html">
            
                    
                    Encrypted Messages
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="../advanced/signalr/">
            
                <a href="../advanced/signalr/">
            
                    
                    SignalR
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.10.1" data-path="../advanced/signalr/quickstart.html">
            
                <a href="../advanced/signalr/quickstart.html">
            
                    
                    Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.2" data-path="../advanced/signalr/hub_endpoints.html">
            
                <a href="../advanced/signalr/hub_endpoints.html">
            
                    
                    Hub Endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.3" data-path="../advanced/signalr/interop.html">
            
                <a href="../advanced/signalr/interop.html">
            
                    
                    Interop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.4" data-path="../advanced/signalr/sample.html">
            
                <a href="../advanced/signalr/sample.html">
            
                    
                    Sample
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10.5" data-path="../advanced/signalr/considerations.html">
            
                <a href="../advanced/signalr/considerations.html">
            
                    
                    Considerations
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Troubleshooting</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../troubleshooting/">
            
                <a href="../troubleshooting/">
            
                    
                    Troubleshooting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../troubleshooting/common-gotchas.html">
            
                <a href="../troubleshooting/common-gotchas.html">
            
                    
                    Common gotchas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../troubleshooting/show-config.html">
            
                <a href="../troubleshooting/show-config.html">
            
                    
                    Diagnostics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Architecture</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../architecture/">
            
                <a href="../architecture/">
            
                    
                    Articles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../architecture/green-cache.html">
            
                <a href="../architecture/green-cache.html">
            
                    
                    Green Cache
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Key concepts</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="key-concepts">Key concepts</h1>
<p>When getting started using MassTransit, it is a good idea to have a handle on messaging concepts and terminology. To ensure that you are on the right path when looking at a class or interface, here are some of the terms used when working with MassTransit.</p>
<h2 id="message-contracts">Message contracts</h2>
<p>A message contract defines a <em>contract</em> between a message producer and a message consumer. In MassTransit, message contracts are declared using types, which should be <em>interfaces</em> in .NET, but may also be classes. For example, a simple command contract for submitting an order is shown below.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SubmitOrder</span>
<span class="token punctuation">{</span>
    <span class="token class-name">Guid</span> OrderId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token class-name">DateTimeOffset</span> SubmitDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">string</span> OrderNumber <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    OrderItem<span class="token punctuation">[</span><span class="token punctuation">]</span> Items <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderItem</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">string</span> ItemNumber <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">int</span> Quantity <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="serialization">Serialization</h2>
<p>MassTransit is a service bus, and a service bus is designed to move <em>messages</em>. At the lowest level, a message is a byte array (<code>byte[]</code>) which may represent JSON, XML, or encrypted data.</p>
<p>When sending a message, MassTransit uses a message serializer to convert message contract instances (objects) into JSON, XML, or whatever output format is generated by the serializer. When receiving that message, a message deserializer is used to convert the formatted data back into the message contract.</p>
<p>By default, MassTransit uses JSON to serialize messages, while simultaneously suppporting the deserialization of JSON, BSON, and XML messages. Additional deserializers can be added, and the serializer can be changed for each receive endpoint or the entire bus.</p>
<p>To specify that XML should be used when sending messages:</p>
<pre class="language-"><code class="lang-csharp">Bus<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">CreateUsingInMemory</span><span class="token punctuation">(</span>cfg <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    cfg<span class="token punctuation">.</span><span class="token function">UseXmlSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Other serializers can be configured using other configuration methods.</p>
<h2 id="consumers">Consumers</h2>
<p>Consumers are classes used to <em>consume</em> messages. Conceptually they are similar to <em>Controllers</em> in a Web API, in that consumers implement a generic interface to specify the message types to be consumed.</p>
<p>An example consumer that consumes the sample message contract above is shown below.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubmitOrderConsumer</span> <span class="token punctuation">:</span>
    <span class="token class-name">IConsumer</span><span class="token operator">&lt;</span>SubmitOrder<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">Consume</span><span class="token punctuation">(</span>ConsumeContext<span class="token operator">&lt;</span>SubmitOrder<span class="token operator">&gt;</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// do the thing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Consumers are stateless by design, and MassTransit makes no effort to correlate messages to a specific consumer instance. For each message, a consumer factory is used to create a consumer instance to which that message is delivered.</p>
<h2 id="sagas">Sagas</h2>
<p>In MassTransit, a saga is a stateful consumer that allows multiple messages to be correlated to a single consumer instance. A saga, sometimes called a workflow, is typically used to orchestrate other consumers or services in a distributed system while maintaining state between messages. MassTransit persists a saga&apos;s state using a saga repository, and automatically creates a new or uses an existing state instance as messages are received.</p>
<blockquote>
<p>Consider a saga a long-running transaction that is managed at the application layer instead of being handled inside a database or by a distributed transaction coordinator.</p>
</blockquote>
<p>MassTransit supports simple class-based sagas and powerful, advanced state machine sagas using <em>Automatonymous</em> - a declarative state machine library. In a class-based saga, messages are correlated using a <code>Guid CorrelationId</code> property and must implement the <code>CorrelatedBy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Guid</span><span class="token punctuation">&gt;</span></span></code> interface. Class-based sagas can also <em>observe</em> messages by specifying a correlation expression, but caution should be used to avoid matching a message to hundreds of saga instances which may cause performance issues. </p>
<p>A simple saga is shown below as an example, which monitors the completion time of orders.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderToCompletionSaga</span> <span class="token punctuation">:</span>
    <span class="token class-name">ISaga</span><span class="token punctuation">,</span>
    InitiatedBy<span class="token operator">&lt;</span>OrderSubmitted<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    Orchestrates<span class="token operator">&lt;</span>OrderCompleted<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Guid</span> CorrelationId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">DateTime</span> Submitted <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">DateTime</span> Completed <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">Consume</span><span class="token punctuation">(</span>ConsumeContext<span class="token operator">&lt;</span>OrderSubmitted<span class="token operator">&gt;</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Submitted <span class="token operator">=</span> context<span class="token punctuation">.</span>Message<span class="token punctuation">.</span>OrderDate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token class-name">Task</span> <span class="token function">Consume</span><span class="token punctuation">(</span>ConsumeContext<span class="token operator">&lt;</span>OrderCompleted<span class="token operator">&gt;</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Completed <span class="token operator">=</span> context<span class="token punctuation">.</span>Message<span class="token punctuation">.</span>CompletionDate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="transports-and-endpoints">Transports and endpoints</h2>
<p>MassTransit is a framework, and being a framework has certain rules. The first of which is known as the Hollywood principle -- &quot;Don&apos;t call us, we&apos;ll call you.&quot; Once the bus is configured and running, message consumer are called by the framework as messages are received. There is no need for the application to poll a message queue or make repeated calls to a framework method in a loop.</p>
<div class="alert alert-info">
<b>Note:</b>
A way to understand this is to think of a message consumer as being similar to a controller in a web application. With a web application, the socket and HTTP protocol are under the hood, and the controller is created and an action method is called by the web framework. MassTransit is similar, it handles the message reception, creates the consumers, and calls the Consume method.
</div>

<p>To initiate the calls into your application code, MassTransit creates an abstraction on top of the messaging platform (such as RabbitMQ).</p>
<h3 id="transports">Transports</h3>
<p>The transport is at the lowest level and is closest to the actual message broker. The transport communicates with the broker, responsible for sending and receiving messages. The send and receive sections of the transport are completely independent, keeping reads and writes separate in line with the Command Query Responsibility Segregation (CQRS) pattern.</p>
<h3 id="receive-endpoints">Receive endpoints</h3>
<p>A receive endpoint receives messages from a transport, deserializes the message body, and routes the message to the consumers. Applications do not interact with receive endpoints, other than to configure and connect consumers. The rest of the work is done entirely by MassTransit.</p>
<h3 id="send-endpoints">Send endpoints</h3>
<p>A send endpoint is used by an application to send a message to a specific address. They can be obtained from the <code>ConsumeContext</code> or the <code>IBus</code> and support a variety of message types.</p>
<h3 id="endpoint-addressing">Endpoint addressing</h3>
<p>MassTransit uses Universal Resource Identifiers (URIs) to identify endpoints. URIs are flexible and easy to include additional information, such as queue or exchange types. An example RabbitMQ endpoint address for <em>my_queue</em> on the local machine would be: <code>rabbitmq://localhost/my_queue</code></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Understanding MassTransit">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="under-the-hood.html" class="navigation navigation-next " aria-label="Next page: Under the hood">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Key concepts","level":"1.4.1","depth":2,"next":{"title":"Under the hood","level":"1.4.2","depth":2,"path":"understand/under-the-hood.md","ref":"understand/under-the-hood.md","articles":[{"title":"Topology","level":"1.4.2.1","depth":3,"path":"understand/default-topology.md","ref":"understand/default-topology.md","articles":[]}]},"previous":{"title":"Understanding MassTransit","level":"1.4","depth":1,"path":"understand/README.md","ref":"understand/README.md","articles":[{"title":"Key concepts","level":"1.4.1","depth":2,"path":"understand/key-ideas.md","ref":"understand/key-ideas.md","articles":[]},{"title":"Under the hood","level":"1.4.2","depth":2,"path":"understand/under-the-hood.md","ref":"understand/under-the-hood.md","articles":[{"title":"Topology","level":"1.4.2.1","depth":3,"path":"understand/default-topology.md","ref":"understand/default-topology.md","articles":[]}]},{"title":"What we add to the transport","level":"1.4.3","depth":2,"path":"understand/additions-to-transport.md","ref":"understand/additions-to-transport.md","articles":[]},{"title":"Publishing messages","level":"1.4.4","depth":2,"path":"understand/publishing.md","ref":"understand/publishing.md","articles":[]},{"title":"Sending messages","level":"1.4.5","depth":2,"path":"understand/sending.md","ref":"understand/sending.md","articles":[]},{"title":"Performance counters","level":"1.4.6","depth":2,"path":"understand/perfcounters.md","ref":"understand/perfcounters.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","expandable-chapters"],"root":"docs","styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/MassTransit/MassTransit/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/masstransit/masstransit/tree/master/docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"MassTransit","gitbook":"3.2.2"},"file":{"path":"understand/key-ideas.md","mtime":"2019-06-20T19:40:54.718Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2019-06-20T19:43:46.981Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

